package kr.ch08.repository.board;

import java.util.List;
import java.util.function.Supplier;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import kr.ch08.entity.board.ArticleEntity;
import kr.ch08.entity.board.CommentEntity;
import kr.ch08.entity.board.FileEntity;
import kr.ch08.entity.board.UserEntity;

@SpringBootTest
public class BoardRepositoryTest {
	
	@Autowired private ArticleRepository articleRepo;
	@Autowired private CommentRepository commentRepo;
	@Autowired private FileRepository fileRepo;
	@Autowired private UserRepository userRepo;
	
	
	@DisplayName("insertUser 테스트")
	public void insertUser() {
		
		UserEntity user = UserEntity.builder()
							.uid("A103")
							.name("김유신")
							.hp("010-1233-1233")
							.build();
		
		userRepo.save(user);
	}
	
	
	@DisplayName("insertArticle 테스트")
	public void insertArticle() {
		
		UserEntity user = UserEntity.builder().uid("A103").build();
		
		ArticleEntity article = ArticleEntity.builder()
									.content("ㅎㅇ")
									.title("ㅎㅇ")
									.user(user)
									.build();
		
		articleRepo.save(article);
	}

	
	@DisplayName("insertCommnet 테스트")
	public void insertCommnet() {
		
		ArticleEntity no = ArticleEntity.builder().no(3).build();
		
		UserEntity user = UserEntity.builder().uid("A101").build();
		
		CommentEntity comment = CommentEntity.builder()
									.content("bye")
									.article(no)
									.user(user)
									.build();
		
		commentRepo.save(comment);
		
	}
	

	
	@DisplayName("insertFile 테스트")
	public void insertFile() {
		ArticleEntity no = ArticleEntity.builder().no(5).build();
		FileEntity file = FileEntity.builder()
							.oName("테스트5.txt")
							.sName("fdsafsfa.txt")
							.article(no)
							.build();
		
		fileRepo.save(file);
	}
	
	@Test
	@DisplayName("selectArticles 테스트")
	public void selectArticles() {
		
		List<ArticleEntity> articles = articleRepo.findAll();
		System.out.println(articles);
		
		
		for(ArticleEntity article : articles) {
			System.out.println(article);
		}
		
	}

	@DisplayName("selectArticle 테스트")
	public void selectArticle() {
		
	}
	
}
